基于生产案例详细解析和重现Istio访问日志的各种应答标记 | Detailed Parse and Reproduce Response Flags of Istio Access Log Based on Production Use Case - Chaomeng Zhang, Huawei

https://kccncosschn2023.sched.com/event/1PTHc/27dchang-dan-yong-ji-rezhou-jiong-istionie-xie-zha-jissuo-di-ping-detailed-parse-and-reproduce-response-flags-of-istio-access-log-based-on-production-use-case-chaomeng-zhang-huawei

服务网格的访问日志在运维工作中发挥着非常关键的作用。特别是访问日志在HTTP响应码外提供应答标记Response Flags，通过针对性的标记提供有用的额外信息，帮助运维人员提高故障诊断的效率。但是Envoy社区官方文档中对应答标记的介绍非常简单，Istio社区也没有资料介绍这部分内容。在实际使用中当用户遇到包含DC、UF、UH等应答标记的日志时，很难找到权威材料参考来解决具体问题。 在本次演讲中，超盟将重现10多种生产中常碰到的应答标记的实践案例，解析每个标记的含义、产生场景，并介绍如何基于这些应答标记进行故障诊断和问题定界，进而解决案例中这些应答标记表示的问题。此外，还将解析生产用例中访问日志的6个有用的时间字段的含义，并介绍如何基于这些时间字段定界服务网格的延时相关问题。 
Access logs of service mesh is practically important in ops work. Especially, Response Flags in each log help improve fault diagnosis efficiency by providing additional details of request. But the simple and brief definition of Response Flags in Envoy and Istio community makes it hard to refer to it to effectively find the real problem and root cause when running into logs containing “DC, UF, UH” like flags in practice. In this session, Chaomeng will introduce how Istio Access Log promote fault diagnosis efficiency in micro service Ops practice. He will reproduce 10+ different Response Flags cases of customer’s practice, analyze what each flags indicates and when such logs generated, and demonstrate how to perform fault diagnosis and problem demarcation based on the Flags, and how to solve the problem of each case. Additionally he will parse the meaning of 6 useful time information of access log, and introduce how to figure out the most time-consuming period.